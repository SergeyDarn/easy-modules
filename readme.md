# Easy Git Modules

## Как работает библиотека

Исходный код полностью написан на го и скомпилирован в один бинарный файл. Для работы библиотеки достаточно скопировать этот бинарный файл в корень вашего проекта и настроить несколько переменных среды во втором файле (инструкция по установке ниже).

А по своей логике, библиотека считывает гит зависимости из `package.json` (или заданного в конфиге кастомного файла) и клонирует гит модули в заданную вами папку. Плюс предоставляет несколько дополнительных команд по работе с гит модулями.

## Установка

1. Скопировать в корень проекта файл `mod` из репозитория
2. Скопировать в корень проекта файл `go.env` из репозитория
3. Cоздать в корне проекта файл `go.env.local` для локальных настроек репозитория
4. Задать желаемые настройки конфига
```.env 
CONFIG_FILE=package.json # Json файл с конфигом, из которого берется список модулей (исспользуются поля на верхнем уровне dependencies и devDependencies - как в package.json)
MODULES_DIR="src/modules" # Папка для модулей
SSH_KEY_PATH="/Users/sergeydarn/.ssh/id_rsa" # Локальный приватный SSH ключ
SSH_KEY_PASSWORD= # Пароль от вашего SSH ключа (если задавали)
```
5. По SSH Ключу и паролю - это обязательно нужно задать вручную, в `go.env.local` файле - иначе не будет работать клонирование модулей по SSH.

Как узнать свой ключ - зайти в папку `~/.ssh` и там будут файлы по типу `id_rsa` или `id_ed25330` - это нужный нам приватный ssh ключ. Чтобы узнать его абсолютный путь, в той же папке пишем `pwd` и складываем результат вывода в консоли с именем файла, и пишем это в файл конфига.

## Команды модуля
```shell
    ./mod -h # Вывести в консоль полный список команд модуля
    ./mod # Запустить установку модулей (параллельная по дефолту, каждый модуль проверяется отдельно и если в каком-то из модулей есть изменений - он пропускается)
    ./mod -parallel-install=false # Запустить установку модулей (не параллельно)
    ./mod -safe-install=false # Запустить установку модулей с предварительным удалением корневой папки модулей для переустановки (по умолчанию такого нет)

    ./mod -show-changed-modules=true #Запустить отдельную команду, чтобы посмотреть список модулей в которых локальные изменения в гите
```

## Примеры референсов на модули в конфиге

1. Просто Ssh ссылка на модуль 
2. Просто Https ссылка на модуль
3. Ветки (если в модуле что-то изменяется, то без обновления тэга при инсталле все новые обновления подтянулся)
4. Тэги (исопльзуется регулярка `\d(\..*)+` для опредления что это тэг)
5. Хэш коммита

```json
 "devDependencies": {
    "test": "git@github.com:SergeyDarn/test-module-js.git",
    "storefront-query-builder": "https://github.com/DivanteLtd/storefront-query-builder.git",
 },
 "dependencies": {
    "scrape-search-ai": "https://github.com/SergeyDarn/scrape-search-ai#dev",
    "magnific-popup": "git@github.com:SergeyDarn/Magnific-Popup.git#1.8.0",
    "Course_Bash": "git@github.com:SergeyDarn/Course_Bash-Programming.git#3a7a19020151b45a29896c9142723efe5b11a061",
 }
```
